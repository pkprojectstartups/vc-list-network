{{ define "main" }}
<div class="container">
    <section class="hero">
        <h2>{{ .Site.Params.description }}</h2>
        {{ $sectorFilter := .Site.Params.sector_filter }}
        {{ $filteredPages := where .Site.RegularPages "Type" "vcs" }}
        {{ if $sectorFilter }}
            {{ $filteredPages = where $filteredPages ".Params.sectors" "intersect" (slice $sectorFilter) }}
        {{ end }}
        <p>Showing {{ len $filteredPages }} active venture capital firms</p>
    </section>

    <section class="vc-list">
        {{ $sectorFilter := .Site.Params.sector_filter }}
        {{ $filteredPages := where .Site.RegularPages "Type" "vcs" }}
        {{ if $sectorFilter }}
            {{ $filteredPages = where $filteredPages ".Params.sectors" "intersect" (slice $sectorFilter) }}
        {{ end }}
        
        {{ range $filteredPages }}
        <article class="vc-card">
            <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
            <div class="meta">
                <span class="region">ğŸ“ {{ .Params.region }}</span>
                {{ if .Params.stages }}
                <span class="stages">ğŸ’° {{ delimit .Params.stages ", " }}</span>
                {{ end }}
            </div>
            {{ if .Params.sectors }}
            <div class="sectors">
                {{ range .Params.sectors }}
                <span class="tag">{{ . }}</span>
                {{ end }}
            </div>
            {{ end }}
            <p>{{ .Summary }}</p>
            <a href="{{ .Permalink }}" class="read-more">View Details â†’</a>
        </article>
        {{ end }}
    </section>
</div>
{{ end }}